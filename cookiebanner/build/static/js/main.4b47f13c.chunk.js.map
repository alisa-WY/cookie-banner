{"version":3,"sources":["logo.svg","utils/cookieConsent.ts","lib/CookieBanner/index.tsx","App.js","reportWebVitals.js","index.js"],"names":["cookieChoiceDefault","ga","default","cookies","af","fbp","lip","defaultConsents","Object","keys","reduce","obj","key","cookieChoice","cookieName","version","domain","isShowCookieBanner","params","cookieConsents","consent","Cookies","get","JSON","parse","decodeURIComponent","getCookieConsents","console","log","CookieBanner","region","React","useState","setCookieConsent","className","dangerouslySetInnerHTML","__html","target","rel","href","type","onClick","cookieContentObj","value","forEach","cookie","remove","set","stringify","expires","secure","sameSite","setCookieConsents","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"+NAAe,I,oCCGTA,EAAyC,CAC7CC,GAAI,CACFC,SAAS,EACTC,QAAS,CAAC,MAAO,OAAQ,2BAA4B,uBAEvDC,GAAI,CACFF,SAAS,EACTC,QAAS,IAEXE,IAAK,CACHH,SAAS,EACTC,QAAS,CAAC,SAEZG,IAAK,CACHJ,SAAS,EACTC,QAAS,KAIPI,EAAkBC,OAAOC,KAAKT,GAAqBU,QAAO,SAACC,EAAUC,GAEzE,OADAD,EAAIC,GAAOZ,EAAoBY,GAAKV,QAC7BS,IACN,IAEGE,EAAeL,OAAOC,KAAKT,GAE3Bc,EAAa,sBAEbC,EAAU,KAEVC,EAAS,YAmCFC,EAAqB,SAACC,GAEjC,IAAMC,EAbyB,SAACD,GAEhC,IAAME,EAAUC,IAAQC,IAAIR,GAE5B,OADmBM,GAAWG,KAAKC,MAAMC,mBAAmBL,KAIrDb,EAMgBmB,GAEvB,OADAC,QAAQC,IAAI,UAAWT,IACF,OAAdA,QAAc,IAAdA,OAAA,EAAAA,EAAgBJ,WAAYA,G,OCvBtBc,EAlCmC,SAAC,GAE7C,EADJC,OACK,IAEL,EAA4CC,IAAMC,SAAS,IAA3D,mBAAuBC,GAAvB,WAQA,OAAOhB,IACL,sBAAKiB,UAAU,eAAf,UACE,sBAAKA,UAAU,iBAAf,UACE,mBAAGA,UAAU,eAAb,SA1BkB,8CA2BlB,mBAAGA,UAAU,cAAcC,wBAAyB,CAAEC,OA1BpC,qbA4BpB,sBAAKF,UAAU,iBAAf,UACE,mBACEG,OAAO,SACPC,IAAI,sBACJC,KAAM,uDAHR,SA5BsB,oBAmCtB,wBAAQC,KAAK,SAASC,QApBN,WACpB,IAAMC,EDauB,WAKZ,IAJnBC,EAIkB,uDAJK9B,EAAaH,QAAO,SAACC,EAAUC,GAEpD,OADAD,EAAIC,IAAO,EACJD,IACN,IAeH,OAbAE,EAAa+B,SAAQ,SAAAhC,GACnB,IAAK+B,EAAM/B,GAAM,CACf,OAAyBZ,EAAoBY,IAAQ,IAA7CT,cAAR,MAAkB,GAAlB,GACQyC,SAAQ,SAAAC,GAAM,OAAIxB,IAAQyB,OAAOD,EAAQ,CAAE7B,kBAGvD2B,EAAM5B,QAAUA,EAChBM,IAAQ0B,IAAIjC,EAAYS,KAAKyB,UAAUL,GAAQ,CAC7CM,QAAS,IAETC,QAAQ,EACRC,SAAU,SAELR,EChCoBS,GACzBnB,EAAiBS,IAkBb,SAlCsB,qBAuCxB,MC/BSW,MAXf,WACE,OACE,sBAAKnB,UAAU,MAAf,UACE,wBAAQA,UAAU,aAAlB,oBACA,qBAAKA,UAAU,WAAf,kBACA,cAAC,EAAD,IACA,wBAAQA,UAAU,aAAlB,wBCESoB,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1Bb,M","file":"static/js/main.4b47f13c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import Cookies from 'js-cookie';\nimport { CookieConsent, CookieParam, CookieChoiceInter } from '../interface/cookieBanner';\n\nconst cookieChoiceDefault: CookieChoiceInter = {\n  ga: {\n    default: false,\n    cookies: ['_ga', '_gid', '_gat_gtag_UA-144727112-1', 'gat_UA-143770054-3'],\n  },\n  af: {\n    default: false,\n    cookies: [],\n  },\n  fbp: {\n    default: false,\n    cookies: ['_fbp'],\n  },\n  lip: {\n    default: false,\n    cookies: [],\n  },\n};\n\nconst defaultConsents = Object.keys(cookieChoiceDefault).reduce((obj: any, key) => {\n  obj[key] = cookieChoiceDefault[key].default;\n  return obj;\n}, {});\n\nconst cookieChoice = Object.keys(cookieChoiceDefault);\n\nconst cookieName = 'fans-cookie-consent';\n\nconst version = 'v1';\n\nconst domain = '.fans.com';\n\nexport const setCookieConsents = (\n  value: CookieConsent = cookieChoice.reduce((obj: any, key) => {\n    obj[key] = true;\n    return obj;\n  }, {})\n): CookieConsent => {\n  cookieChoice.forEach(key => {\n    if (!value[key]) {\n      const { cookies = [] } = cookieChoiceDefault[key] || {};\n      cookies.forEach(cookie => Cookies.remove(cookie, { domain }));\n    }\n  });\n  value.version = version;\n  Cookies.set(cookieName, JSON.stringify(value), {\n    expires: 30 * 13,\n    // domain,\n    secure: true,\n    sameSite: 'None',\n  });\n  return value;\n};\n\nexport const getCookieConsents = (params: CookieParam) => {\n  // const { region, cookie } = params;\n  const consent = Cookies.get(cookieName);\n  const consentObj = consent && JSON.parse(decodeURIComponent(consent));\n  if(consentObj) {\n    return consentObj;\n  }\n  return defaultConsents;\n};\n\n// 不需要判断regoin，前期全部展示\nexport const isShowCookieBanner = (params: CookieParam): boolean => {\n  // const { region } = params;\n  const cookieConsents = getCookieConsents(params);\n  console.log('=======', cookieConsents);\n  return cookieConsents?.version !== version;\n};\n","import React from 'react'\nimport './index.scss';\nimport { isShowCookieBanner, setCookieConsents } from '../../utils/cookieConsent';\n\nconst cookieBannerTitle = \"Accept cookies from Fans on this browser?\";\nconst cookieBannerSubTitle = `We use cookies and other technologies to improve your experience on our websites. By clicking \"Accept all\", you agree to let us use third-party cookies for analytics and marketing purposes. You can learn more about how we use cookies in our <a href=\"https://www.tiktok.com/legal/tiktok-website-cookies-policy?lang=en\" target=\"_blank\" rel=\"noopener noreferrer\">Cookies Policy</a>. To manage your cookies, click \"Manage settings.\"`;\nconst cookieBannerBtnManage = \"Cookies Setting\";\nconst cookieBannerBtnAccept = \"Accpet all\";\n\n\ninterface CookieBannerProps {\n  region?: string;\n}\n\n\nconst CookieBanner: React.FC<CookieBannerProps> = ({\n  region='en',\n}) => {\n\n  const [ cookieConsent, setCookieConsent ] = React.useState({});\n\n  const acceptOnClick = () => {\n    const cookieContentObj = setCookieConsents();\n    setCookieConsent(cookieContentObj);\n  }\n\n\n  return isShowCookieBanner({region: region}) ? (\n    <div className=\"CookieBanner\">\n      <div className=\"cookie-content\">\n        <p className=\"cookie-title\">{cookieBannerTitle}</p>\n        <p className=\"cookie-desc\" dangerouslySetInnerHTML={{ __html: cookieBannerSubTitle }}></p>\n      </div>\n      <div className=\"button-wrapper\">\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href={'https://www.tiktok.com/legal/cookie-settings?lang=en'}\n        >\n          {cookieBannerBtnManage}\n        </a>\n        <button type=\"button\" onClick={acceptOnClick}>\n          {cookieBannerBtnAccept}\n        </button>\n      </div>\n    </div>\n  ) : null;\n}\n\nexport default CookieBanner;\n","import logo from './logo.svg';\nimport './App.css';\nimport CookieBanner from '../src/lib/CookieBanner/index.tsx';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">header</header>\n      <div className=\"App-body\">body</div>\n      <CookieBanner />\n      <footer className=\"App-footer\">footer</footer>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}